From 9aa16b7d8956f68fa35bac348186d1a9d06be6a8 Mon Sep 17 00:00:00 2001
From: Juri Berlanda <juriberlanda@hotmail.com>
Date: Thu, 13 Oct 2016 02:58:33 +0200
Subject: [PATCH] Patch out configure, since it breaks cross compile.

---
 setup.py | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/setup.py b/setup.py
index 5b98831..6b53469 100755
--- a/setup.py
+++ b/setup.py
@@ -96,10 +96,9 @@ libraries = []
 # and the PyPy branch will clean it up.
 libev_configure_command = ' '.join([
     "(cd ", _quoted_abspath('libev/'),
-    " && /bin/sh ./configure ",
     " && cp config.h \"$OLDPWD\"",
     ")",
-    '> configure-output.txt'
+    '>> configure-output.txt'
 ])
 
 # See #616, trouble building for a 32-bit python against a 64-bit platform
@@ -112,10 +111,9 @@ else:
 # Use -r, not -e, for support of old solaris. See https://github.com/gevent/gevent/issues/777
 ares_configure_command = ' '.join(["(cd ", _quoted_abspath('c-ares/'),
                                    " && if [ -r ares_build.h ]; then cp ares_build.h ares_build.h.orig; fi ",
-                                   " && /bin/sh ./configure " + _m32 + "CONFIG_COMMANDS= CONFIG_FILES= ",
                                    " && cp ares_config.h ares_build.h \"$OLDPWD\" ",
                                    " && mv ares_build.h.orig ares_build.h)",
-                                   "> configure-output.txt"])
+                                   ">> configure-output.txt"])
 
 
 if WIN:
-- 
2.10.0

